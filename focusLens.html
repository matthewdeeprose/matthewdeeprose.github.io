<!DOCTYPE html>
<html lang="en-GB">
   <head>
      <meta charset="utf-8" />
      <meta name="description" content="FocusLens: Accessibility Focus Inspection Tool">
      <meta name="keywords" content="accessibility, presentation, blog">
      <meta name="author" content="Matthew Deeprose">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>FocusLens: Accessibility Focus Inspection Tool</title>
      <link rel="stylesheet" id="lightCSS" href="light.css" media="(prefers-color-scheme: light)">
      <link rel="stylesheet" id="mainCSS" href="main.css" media="all">
      <link rel="stylesheet" id="darkCSS" href="dark.css" media="(prefers-color-scheme: dark)">
      <link rel="stylesheet" id="printCSS" href="print.css" media="print">
	      <link href="prism/ally-dark.css" rel="stylesheet" />
      <meta property="og:title" content="FocusLens: Accessibility Focus Inspection Tool - Matthew Deeprose">
      <meta property="og:description" content="FocusLens is a lightweight accessibility bookmarklet that helps web developers, designers and testers visualise and understand keyboard focus as it moves through a webpage.">
      <meta property="og:image" content="https://matthewdeeprose.github.io/focuslens43.png">
	  <meta property="og:image:width" content="2500" />
	  <meta property="og:image:height" content="1306" />
      <meta property="og:image:alt" content="">
      <meta property="og:locale" content="en_GB">
      <meta property="og:type" content="website">
      <meta property="og:url" content="https://matthewdeeprose.github.io/focusLens.html">
      <meta name="twitter:card" content="summary_large_image">
      <meta name="theme-color" content="#231F20" media="(prefers-color-scheme: dark)">
      <meta name="theme-color" content="#FFFFF4" media="(prefers-color-scheme: light)">
      <link rel="icon" href="favicon.ico">
      <link rel="alternate" type="application/rss+xml" title="RSS Feed for matthewdeeprose.github.io" href="https://matthewdeeprose.github.io/feed.rss">
      <link rel="icon" href="favicon.svg" type="image/svg+xml">
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:title" content="FocusLens: Accessibility Focus Inspection Tool - Matthew Deeprose" />
      <meta name="twitter:description" content="FocusLens is a lightweight accessibility bookmarklet that helps web developers, designers and testers visualise and understand keyboard focus as it moves through a webpage. "/>
      <meta name="twitter:creator" content="@VLEguru"/>
      <meta name="twitter:site" content="@VLEguru"/>
      <meta name="twitter:image" content="https://matthewdeeprose.github.io/focuslens43.png"/>
      <meta name="twitter:image:alt" content=""/>
      <meta name="twitter:card" content="summary_large_image"/>
	  	      <style>
         .page-wrap > * {
             grid-column: 1/-1 !important;
             grid-row: auto !important;
         }

         .demoImage {
             max-width: 70%;
         }

         @media (max-width: 768px) {
             .demoImage {
                 max-width: 100%;
             }
         }
      </style>
   </head>
   <body>
      <div class="page-wrap" id="start">
         <a class="skip-link" id="skipToContent" href='#main'>Skip to content</a>
         <header class="page-header">
            <div id="banner">
               <div id="logo">
                  <button id="modeToggle" aria-label="Change between light and dark theme" aria-pressed="false" onclick="toggle(this.id);">
                     <svg id="logoSVG" height="45" viewBox="0 0 21 21" width="45" xmlns="http://www.w3.org/2000/svg" aria-labelledby="svgTitle svgDesc" role="img">
                        <title id="svgTitle">Change theme</title>
                        <desc id="svgDesc">Select to switch to light theme</desc>
                        <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(2 1)">
                           <path d="m6.5 17.5h4"/>
                           <path d="m8.5 4c2.4852814 0 4.5 2.01471863 4.5 4.5 0 1.7663751-1.017722 3.2950485-2.4987786 4.031633l-.0012214.968367c0 1.1045695-.8954305 2-2 2s-2-.8954305-2-2l-.00021218-.9678653c-1.48160351-.7363918-2.49978782-2.2653584-2.49978782-4.0321347 0-2.48528137 2.01471863-4.5 4.5-4.5z"/>
                           <path d="m8.5 1.5v-1"/>
                           <path d="m13.5 3.5 1-1"/>
                           <path d="m2.5 3.5 1-1" transform="matrix(-1 0 0 1 6 0)"/>
                           <path d="m13.5 13.5 1-1" transform="matrix(1 0 0 -1 0 26)"/>
                           <path d="m2.5 13.5 1-1" transform="matrix(-1 0 0 -1 6 26)"/>
                           <path d="m1.5 7.5h-1"/>
                           <path d="m16.5 7.5h-1"/>
                        </g>
                     </svg>
                     <svg id="logoSVG-Off" height="45" viewBox="0 0 21 21" width="45" xmlns="http://www.w3.org/2000/svg" aria-labelledby="svgTitleX svgDescX">
                        <title id="svgTitleX">Change theme</title>
                        <desc id="svgDescX">Select to switch to dark theme</desc>
                        <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(6 5)">
                           <path d="m2.5 13.5h4"/>
                           <path d="m4.5 0c2.48528137 0 4.5 2.01471863 4.5 4.5 0 1.76637512-1.01772197 3.29504854-2.49877863 4.03163297l-.00122137.96836703c0 1.1045695-.8954305 2-2 2s-2-.8954305-2-2l-.00021218-.96786527c-1.48160351-.73639182-2.49978782-2.26535843-2.49978782-4.03213473 0-2.48528137 2.01471863-4.5 4.5-4.5z"/>
                        </g>
                     </svg>
                  </button>
               </div>
               <span role="alert" class="hidden" aria-live="polite" id="lightDark"></span>
               <div id="titleLink">Matthew Deeprose</div>
            </div>
         </header>
         <div id="main-navigation" class="page-nav">
            <nav aria-label="Main menu" class="topnav" id="myTopnav">
               <button id="menu" aria-controls="myTopnav" aria-labelledby="myTopnav" aria-expanded="false" class="icon"  aria-haspopup="menu" onclick="menuAction()">
                  <span id="hamburger">
                     <svg id="hamSVG" viewBox="0 0 100 80" width="20" height="20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="img">
                        <title id="hamSVGTitle">Menu</title>
                        <desc id="hamSVGDesc">Select to expand or collapse the menu</desc>
                        <rect width="100" height="20"></rect>
                        <rect y="30" width="100" height="20"></rect>
                        <rect y="60" width="100" height="20"></rect>
                     </svg>
                  </span>
                  <span id="arrow">
                     <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" focusable="false">
                        <title id="arrowSVGTitle">Menu</title>
                        <desc id="arrowSVGDesc">Select to expand or collapse the menu</desc>
                        <g stroke-width="4"  stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" fill-rule="evenodd" fill="none">
                           <path  d="m7.499,6.497l-3.999,4.002l4,4.001"/>
                           <path  d="m16.5,10.5l-13,0"/>
                        </g>
                     </svg>
                  </span>
               </button>
               <a id="homeMenu" href="index.html">Home</a>
               <a href="presentations.html" >Presentations</a>
               <a href="posts.html">Blog Posts</a>
               <a href="projects.html" aria-current="page" class="active">Projects</a>
               <a href="about.html">About</a>
            </nav>
         </div>
         <main class="page-main" id="main">
            <article class="standard">
               <h1 id="top">FocusLens: Accessibility Focus Inspection Tool</h1>
			   			   		   <details id="index">
			               <summary class="">
              <h2 id="Contents">Contents</h2>
            </summary></details>
			   <h2>What is FocusLens?</h2>
			             <script src="prism/prism.js"></script>
			   <figure class="demoImage" style="aspect-ratio: 1896 / 960;">
            <img class="demoImg" src="focusLens-1.png" alt="A volume slider is shown to be in focus. An information bar states the element in focus, and describes its given role and aria attribute." loading="lazy">
            <figcaption class="borders">FocusLens in use, with a volume slider in focus.</figcaption>
          </figure>
        <p>FocusLens is a lightweight accessibility bookmarklet that helps web developers, designers and testers visualise and understand keyboard focus as it moves through a webpage. When activated, it displays detailed information about the currently focused element, including:</p>
        <ul>
            <li>The element type and ARIA role</li>
            <li>ID and class attributes</li>
            <li>Label information</li>
            <li>ARIA states and properties</li>
            <li>Required and validity states</li>
            <li>Parent element hierarchy</li>
        </ul>
        <p>The tool creates a visual highlight around the focused element and displays detailed information in a panel at the bottom of the screen.</p>
		<h2>How to use</h2>
		  <ol>
		  <li>Select and drag the below bookmarklet link to your bookmarks bar.</li>
		  <li>(In Firefox you can also right click on the link below and select <strong>Bookmark link</strong>).</li>
		  <li>Open a website you wish to test and then select the FocusLens bookmarklet from your bookmarks bar.</li>
		  
		  		  </ol>
 <p><a class="bookmarklet" href="javascript:!function()%7Blet%20t%3Ddocument.getElementById(%22a11y-focus-indicator%22)%2Ce%3Ddocument.getElementById(%22a11y-focus-highlight%22)%3Bif(window._a11yHistory%7C%7C(window._a11yHistory%3D%5B%5D)%2Cwindow.a11yLog%7C%7C(window.a11yLog%3Dfunction(t)%7Bconst%20e%3Dwindow._a11yHistory%3Bif(%22clear%22%3D%3D%3Dt)return%20e.length%3D0%2Cvoid%20console.log(%22a11y%20focus%20history%20cleared.%22)%3Bif(%22copy%22%3D%3D%3Dt)%7Bconst%20t%3De.length%3Fe.map(function(t%2Ce)%7Breturn%20e%2B1%2B%22.%20%5B%22%2Bt.time%2B%22%5D%20%22%2Bt.text%7D).join(%22%5Cn%22)%3A%22No%20focus%20events%20recorded.%22%3Breturn%20void%20navigator.clipboard.writeText(t).then(function()%7Bconsole.log(%22a11y%20focus%20history%20copied%20to%20clipboard.%20(%22%2Be.length%2B%22%20entries)%22)%7D%2Cfunction()%7Bconsole.warn(%22Clipboard%20write%20failed.%20Logging%20instead%3A%22)%2Cconsole.log(t)%7D)%7De.length%3F(console.log(%22%3D%3D%3D%20a11y%20Focus%20History%20(%22%2Be.length%2B%22%20entries)%20%3D%3D%3D%22)%2Ce.forEach(function(t%2Ce)%7Bconsole.log(e%2B1%2B%22.%20%5B%22%2Bt.time%2B%22%5D%20%22%2Bt.text)%7D)%2Cconsole.log(%22%3D%3D%3D%20End%20of%20History%20%3D%3D%3D%22)%2Cconsole.log(%22Commands%3A%20a11yLog('clear')%20%7C%20a11yLog('copy')%22))%3Aconsole.log(%22No%20focus%20events%20recorded.%22)%7D)%2C!t)%7B(t%3Ddocument.createElement(%22div%22)).id%3D%22a11y-focus-indicator%22%2Cdocument.body.appendChild(t)%3Blet%20e%3Ddocument.createElement(%22style%22)%3Be.textContent%3D%22%23a11y-focus-indicator%7Bposition%3Afixed%3Bbottom%3A40px%3Bleft%3A0%3Bwidth%3A100%25%3Bbackground-color%3Argba(0%2C0%2C0%2C0.95)%3Bcolor%3Awhite%3Bfont-family%3Amonospace%3Bpadding%3A16px%2020px%3Bz-index%3A9999%3Bfont-size%3A14px%3Bmax-height%3A40vh%3Boverflow-y%3Aauto%3Bbox-shadow%3A0%20-2px%2010px%20rgba(0%2C0%2C0%2C0.2)%7D%23a11y-focus-indicator.active%7Bborder-top%3A3px%20solid%20%23FFFFFF%7D%23a11y-focus-indicator%20.path%7Bcolor%3A%23FFFF00%3Bfont-weight%3Abold%7D%23a11y-focus-indicator%20.id%7Bcolor%3A%23FFFFFF%3Btext-decoration%3Aunderline%3Bfont-weight%3Abold%7D%23a11y-focus-indicator%20.class%7Bcolor%3A%23FFFFFF%3Bborder-bottom%3A1px%20dotted%20%23FFFFFF%7D%23a11y-focus-indicator%20.label%7Bcolor%3A%23FFFFFF%3Bbackground-color%3A%23065D12%3Bpadding%3A0%203px%7D%23a11y-focus-indicator%20.aria-state%7Bbackground-color%3A%233A2F0B%3Bcolor%3A%23FFFFFF%3Bpadding%3A0%204px%3Bmargin%3A0%202px%3Bborder-radius%3A3px%3Bdisplay%3Ainline-block%7D%23a11y-focus-indicator%20.required%7Bbackground-color%3A%238B0000%3Bcolor%3A%23FFFFFF%3Bpadding%3A0%204px%3Bmargin%3A0%202px%3Bborder-radius%3A3px%3Bdisplay%3Ainline-block%7D%23a11y-focus-indicator%20.invalid%7Bbackground-color%3A%23FF0000%3Bcolor%3A%23FFFFFF%3Bpadding%3A0%204px%3Bmargin%3A0%202px%3Bborder-radius%3A3px%3Bdisplay%3Ainline-block%7D%23a11y-focus-indicator%20.element-type%7Bbackground-color%3A%234B0082%3Bcolor%3A%23FFFFFF%3Bpadding%3A0%204px%3Bmargin%3A0%202px%3Bborder-radius%3A3px%3Bfont-weight%3Abold%3Bdisplay%3Ainline-block%7D%23a11y-focus-highlight%7Bposition%3Aabsolute%3Bpointer-events%3Anone%3Bz-index%3A9998%3Bbox-shadow%3A0%200%200%206px%20rgba(255%2C255%2C255%2C0.7)%2C%200%200%200%2012px%20rgba(0%2C0%2C0%2C0.7)%3Bborder-radius%3A2px%3Btransition%3Aall%200.1s%20ease-in-out%7D%40media%20(prefers-reduced-motion%3A%20reduce)%7B%23a11y-focus-highlight%7Btransition%3Anone%7D%7D%23a11y-focus-highlight%3A%3Abefore%7Bcontent%3A''%3Bposition%3Aabsolute%3Btop%3A-10px%3Bleft%3A50%25%3Btransform%3AtranslateX(-50%25)%3Bwidth%3A0%3Bheight%3A0%3Bborder-left%3A8px%20solid%20transparent%3Bborder-right%3A8px%20solid%20transparent%3Bborder-bottom%3A10px%20solid%20rgba(0%2C0%2C0%2C0.8)%7D%22%2Cdocument.head.appendChild(e)%7Dfunction%20o()%7Blet%20o%3Ddocument.activeElement%2Cn%3Dfunction(t)%7Bif(!t)return%22No%20element%20focused%22%3Bconst%20e%3D%7Ba%3A%22link%22%2Cbutton%3A%22button%22%2Cinput%3A%7Bbutton%3A%22button%22%2Ccheckbox%3A%22checkbox%22%2Cradio%3A%22radio%22%2Ctext%3A%22textbox%22%2Cemail%3A%22textbox%22%2Ctel%3A%22textbox%22%2Curl%3A%22textbox%22%2Csearch%3A%22searchbox%22%2Cnumber%3A%22spinbutton%22%2Crange%3A%22slider%22%2Cdate%3A%22textbox%22%2Ctime%3A%22textbox%22%2Ccolor%3A%22textbox%22%2Cfile%3A%22button%22%2Csubmit%3A%22button%22%2Creset%3A%22button%22%2Cimage%3A%22button%22%7D%2Cselect%3A%22combobox%22%2Ctextarea%3A%22textbox%22%2Cdetails%3A%22disclosure%22%2Cdialog%3A%22dialog%22%2Cmenu%3A%22menu%22%2Cprogress%3A%22progressbar%22%2Csummary%3A%22button%22%2Ctable%3A%22table%22%2Cul%3A%22list%22%2Col%3A%22list%22%2Cnav%3A%22navigation%22%2Carticle%3A%22article%22%2Csection%3A%22region%22%2Cheader%3A%22banner%22%2Cfooter%3A%22contentinfo%22%2Cmain%3A%22main%22%2Caside%3A%22complementary%22%2Cform%3A%22form%22%7D%3Blet%20o%3D%22%22%3Bconst%20n%3Dt.tagName.toLowerCase()%3Blet%20a%3Dt.getAttribute(%22role%22)%3Bif(!a)if(%22input%22%3D%3D%3Dn)%7Bconst%20o%3Dt.type%7C%7C%22text%22%3Ba%3De%5Bn%5D%5Bo%5D%7C%7C%22input%22%7Delse%20a%3De%5Bn%5D%7C%7Cnull%3Bo%3Da%3F'%3Cspan%20class%3D%22element-type%22%3E'%2Ba%2B%22%3C%2Fspan%3E%20%22%3A'%3Cspan%20class%3D%22element-type%22%3E'%2Bn%2B%22%3C%2Fspan%3E%20%22%3Blet%20i%3Dn%3Bif(t.id%26%26(i%2B%3D'%3Cspan%20class%3D%22id%22%3E%23'%2Bt.id%2B%22%3C%2Fspan%3E%22)%2Ct.className%26%26%22string%22%3D%3Dtypeof%20t.className)%7Blet%20e%3Dt.className.trim().split(%2F%5Cs%2B%2F)%3Be.length%3E0%26%26%22%22!%3D%3De%5B0%5D%26%26(i%2B%3D'%3Cspan%20class%3D%22class%22%3E.'%2Be.join('.%3C%2Fspan%3E%3Cspan%20class%3D%22class%22%3E.')%2B%22%3C%2Fspan%3E%22)%7Dlet%20l%3Dt.getAttribute(%22tabindex%22)%3Bnull!%3D%3Dl%26%26(i%2B%3D'%20%5Btabindex%3D%22'%2Bl%2B'%22%5D')%3Blet%20r%3Dt.getAttribute(%22role%22)%3Br%26%26(i%2B%3D'%20%5Brole%3D%22'%2Br%2B'%22%5D')%3Blet%20s%3D%5B%5D%3B%5B%22expanded%22%2C%22pressed%22%2C%22selected%22%2C%22checked%22%2C%22current%22%2C%22haspopup%22%2C%22hidden%22%2C%22disabled%22%5D.forEach(e%3D%3E%7Blet%20o%3Dt.getAttribute(%22aria-%22%2Be)%3Bnull!%3D%3Do%26%26s.push('%3Cspan%20class%3D%22aria-state%22%3Earia-'%2Be%2B'%3D%22'%2Bo%2B'%22%3C%2Fspan%3E')%7D)%3Blet%20d%3D%22%22%3Bif(%5B%22INPUT%22%2C%22SELECT%22%2C%22TEXTAREA%22%5D.includes(t.tagName))%7Bif(t.id)%7Blet%20e%3Ddocument.querySelector('label%5Bfor%3D%22'%2Bt.id%2B'%22%5D')%3Be%26%26e.textContent.trim()%26%26(d%3D'%3Cspan%20class%3D%22label%22%3ELabel%3A%20'%2Be.textContent.trim()%2B%22%3C%2Fspan%3E%22)%7Dif(!d)%7Blet%20e%3Dt.parentElement%3Bfor(%3Be%26%26e!%3D%3Ddocument.body%3B)%7Bif(%22LABEL%22%3D%3D%3De.tagName)%7Blet%20o%3De.textContent.trim()%3Bif(t.value%26%26(o%3Do.replace(t.value%2C%22%22).trim())%2Co)%7Bd%3D'%3Cspan%20class%3D%22label%22%3ELabel%3A%20'%2Bo%2B%22%3C%2Fspan%3E%22%3Bbreak%7D%7De%3De.parentElement%7D%7Dlet%20e%3D%22%22%3B(t.hasAttribute(%22required%22)%7C%7C%22true%22%3D%3D%3Dt.getAttribute(%22aria-required%22))%26%26(e%3D'%3Cspan%20class%3D%22required%22%3ERequired%3C%2Fspan%3E')%3Blet%20o%3D%22%22%3B%22true%22%3D%3D%3Dt.getAttribute(%22aria-invalid%22)%7C%7Ct.validity%26%26!t.validity.valid%26%26(o%3D'%3Cspan%20class%3D%22invalid%22%3EInvalid%3C%2Fspan%3E')%2C(e%7C%7Co)%26%26(d%3Dd%3Fd%2B%22%20%22%3A%22%22%2Cd%2B%3De%2B(o%3F%22%20%22%2Bo%3A%22%22))%7Dif(!d)if(t.getAttribute(%22aria-label%22))d%3D'aria-label%3A%20%22'%2Bt.getAttribute(%22aria-label%22)%2B'%22'%3Belse%20if(t.getAttribute(%22aria-labelledby%22))%7Blet%20e%3Dt.getAttribute(%22aria-labelledby%22).split(%2F%5Cs%2B%2F)%2Co%3D%5B%5D%3Bfor(let%20t%20of%20e)%7Blet%20e%3Ddocument.getElementById(t)%3Be%26%26o.push(e.textContent.trim())%7Do.length%3E0%26%26(d%3D'aria-labelledby%3A%20%22'%2Bo.join(%22%20%22)%2B'%22')%7Delse%20t.title%3Fd%3D'title%3A%20%22'%2Bt.title%2B'%22'%3At.alt%3Fd%3D'alt%3A%20%22'%2Bt.alt%2B'%22'%3At.placeholder%3Fd%3D'placeholder%3A%20%22'%2Bt.placeholder%2B'%22'%3At.textContent%26%26t.textContent.trim()%26%26(d%3D'text%3A%20%22'%2Bt.textContent.trim().substring(0%2C50)%2B(t.textContent.trim().length%3E50%3F%22...%22%3A%22%22)%2B'%22')%3Bd%26%26(i%2B%3D%22%20%22%2Bd)%2Cs.length%3E0%26%26(i%2B%3D%22%20%22%2Bs.join(%22%20%22))%3Blet%20c%3Dt.parentElement%2Cu%3D%5B%5D%3Bfor(%3Bc%26%26c!%3D%3Ddocument.body%26%26u.length%3C3%3B)%7Blet%20t%3Dc.tagName.toLowerCase()%3Bc.id%26%26(t%2B%3D%22%23%22%2Bc.id)%2Cu.unshift(t)%2Cc%3Dc.parentElement%7Dreturn(u.length%3E0%3F'%3Cspan%20class%3D%22path%22%3E'%2Bu.join(%22%20%3E%20%22)%2B%22%3C%2Fspan%3E%20%3E%20%22%3A%22%22)%2Bo%2Bi%7D(o)%3Bt.innerHTML%3D%22%3Cstrong%3EFocus%3A%3C%2Fstrong%3E%20%22%2Bn%2Ct.className%3D%22active%22%3Blet%20a%3Dn.replace(%2F%3C%5B%5E%3E%5D*%3E%2Fg%2C%22%22)%3Bconsole.log(%22Focus%3A%20%22%2Ba)%3Blet%20i%3Dnew%20Date%2Cl%3Di.getHours().toString().padStart(2%2C%220%22)%2B%22%3A%22%2Bi.getMinutes().toString().padStart(2%2C%220%22)%2B%22%3A%22%2Bi.getSeconds().toString().padStart(2%2C%220%22)%2B%22.%22%2Bi.getMilliseconds().toString().padStart(3%2C%220%22)%3Bif(window._a11yHistory.push(%7Btime%3Al%2Ctext%3Aa%7D)%2Co%26%26o!%3D%3Ddocument.body%26%26o!%3D%3Ddocument.documentElement)%7Bconst%20t%3Do.getBoundingClientRect()%2Cn%3D10%3Be.style.display%3D%22block%22%2Ce.style.top%3Dwindow.scrollY%2Bt.top-n%2B%22px%22%2Ce.style.left%3Dwindow.scrollX%2Bt.left-n%2B%22px%22%2Ce.style.width%3Dt.width%2B2*n%2B%22px%22%2Ce.style.height%3Dt.height%2B2*n%2B%22px%22%7Delse%20e.style.display%3D%22none%22%7De%7C%7C((e%3Ddocument.createElement(%22div%22)).id%3D%22a11y-focus-highlight%22%2Cdocument.body.appendChild(e))%2Cdocument.addEventListener(%22focus%22%2Co%2C!0)%2Cdocument.addEventListener(%22focusout%22%2Cfunction()%7Bt.className%3D%22%22%2Ce.style.display%3D%22none%22%7D%2C!0)%2Cconsole.log(%22a11y%20Focus%20Indicator%20active.%20Commands%3A%5Cn%20%20a11yLog()%20%20%20%20%20%20%20%20%E2%80%94%20Dump%20focus%20history%20to%20console%5Cn%20%20a11yLog('copy')%20%20%E2%80%94%20Copy%20focus%20history%20to%20clipboard%5Cn%20%20a11yLog('clear')%20%E2%80%94%20Clear%20focus%20history%22)%2Co()%7D()%3B">FocusLens</a></p>
  

		  

		
        <h2>Why FocusLens is Useful</h2>
        <p>Testing keyboard navigation is a critical part of ensuring web accessibility (WCAG 2.2 AA compliance), but it can be challenging to:</p>
        <ul>
            <li>Understand where keyboard focus is currently positioned</li>
            <li>Determine whether elements have appropriate accessible names</li>
            <li>Verify correct ARIA roles and states are being used</li>
            <li>Identify focus order problems</li>
            <li>Detect missing focus indicators</li>
        </ul>
        <p>FocusLens addresses these challenges by providing clear visual feedback and detailed information about each focused element, making it easier to identify and fix accessibility issues related to keyboard navigation and focus management.</p>

        <h2>Top Tips for Usage</h2>
        <ol class="tips">
            <li><span class="tip-highlight">Keyboard Testing:</span> Use Tab, Shift+Tab, arrow keys, and Enter to navigate through the page and observe focus behaviour.</li>
            <li><span class="tip-highlight">Form Validation:</span> Pay attention to the 'Required' and 'Invalid' indicators when testing form fields.</li>
            <li><span class="tip-highlight">Check Labels:</span> Verify that all interactive elements have appropriate labels, either through explicit label elements, aria-label, or other accessible naming methods.</li>
            <li><span class="tip-highlight">Watch for Focus Order:</span> Tab through your entire page to ensure the focus order is logical and follows the visual layout.</li>
            <li><span class="tip-highlight">Verify ARIA States:</span> Check that interactive components like accordions and tabs correctly update their ARIA states (expanded, selected, etc.) when activated.</li>
            <li><span class="tip-highlight">Test Skip Links:</span> Ensure any skip navigation links correctly move focus to the main content.</li>
            <li><span class="tip-highlight">Check Custom Components:</span> Pay special attention to custom widgets and components to verify they have appropriate roles and keyboard interaction patterns.</li>
            <li><span class="tip-highlight">Compare Browsers:</span> Test focus behaviour across different browsers, as focus handling can sometimes vary.</li>
        </ol>

        <h2>What FocusLens Won't Do</h2>
        <ol>
            <li><strong>Automated Testing:</strong> FocusLens is a manual testing tool and doesn't automatically scan pages for issues or generate reports.</li>
            <li><strong>Fix Issues:</strong> The tool identifies focus-related problems but doesn't implement fixesâ€”you'll need to modify your code to address any issues found.</li>
            <li><strong>Test All WCAG Criteria:</strong> While useful for focus-related accessibility testing, FocusLens doesn't check for other WCAG requirements such as colour contrast, content structure, or alternative text.</li>
            <li><strong>Work on Shadow DOM Elements:</strong> The tool may have limited functionality with elements inside Shadow DOM.</li>
            <li><strong>Test Mobile Touch Interactions:</strong> FocusLens focuses on keyboard navigation and doesn't help test touch-specific interactions on mobile devices.</li>
            <li><strong>Performance Testing:</strong> The tool doesn't measure or report on performance impacts of accessibility implementations.</li>
            <li><strong>Analyse Off-Screen Content:</strong> FocusLens only shows information about elements that are currently in the DOM and focused, not content that may be loaded dynamically.</li>
            <li><strong>Evaluate Screen Reader Compatibility:</strong> While it shows ARIA attributes, it doesn't verify how screen readers actually announce content.</li>
        </ol>
		    <div class="note">
      <p><strong>Note:</strong> Some websites with strict Content Security Policies may block bookmarklets from running. If FocusLens doesn't work on a particular site, try testing on a different website.</p>
    </div>
		<p>This bookmarklet was inspired by Hidde de Vries' blog post, <a href="https://hidde.blog/console-logging-the-focused-element-as-it-changes/">"Console logging the focused element as it changes"</a>.</p>
            </article>
			      <div id="panel">
         <button class="panelButton" onclick="topFunction()" id="myBtn">
            <svg id="svgUP" height="50" viewBox="0 0 21 21" width="50" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svgTitle2 svgDesc2">
               <title id="svgTitle2">Top.</title>
               <desc id="svgDesc2">Move to the top of the page.</desc>
               <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(2 2)">
                  <circle cx="8.5" cy="8.5" r="8"/>
                  <path d="m11.5 7.5-3-3-3 3"/>
                  <path d="m8.5 4.5v8"/>
               </g>
            </svg>
            <br />
            <span id="myBtnTop" class="panelLabel">Top</span>
         </button>
         <button class="panelButton" onclick="bottomFunction()" id="myBtn2">
            <svg id="svgDOWN" height="50" viewBox="0 0 21 21" width="50" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svgTitle3 svgDesc3">
               <title id="svgTitle3">Bottom.</title>
               <desc id="svgDesc3">Move to the bottom of the page.</desc>
               <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(3 2)">
                  <circle cx="8.5" cy="8.5" r="8"/>
                  <path d="m5.5 9.5 3 3 3-3"/>
                  <path d="m8.5 12.5v-8"/>
               </g>
            </svg>
            <br />
            <span id="myBtnBottom" class="panelLabel">Bottom</span>
         </button>
      </div>
         </main>
         <aside class="page-sidebar related">
            <section class="related">
			<h2>Related content</h2>
			               <ul class="relUL">
                  <li><a href="contrastCompanion">Contrast Companion</a></li>
                  <li><a href="responsiveVimeoEmbed">Responsive Vimeo Embed Code Generator</a></li>
                  <li><a href="findBbAllyUnsafeHTML.html">Identify the 'unsafe html' content from an accessibility report in Blackboard</a></li>
               </ul>
			</section>

         </aside>
         <footer class="page-footer">
            <div id="RSS"><a id="rssA" href="feed.rss">RSS</a></div>
            <div id="SiteMap"><a href="siteMap.html">Site Map</a></div>
            <div id="AccessibilityFoot">
               <a href="Accessibility_Statement.html">Accessibility Statement</a>
            </div>
            <div id="twitterFoot">
               <a href="https://twitter.com/vleguru?ref_src=twsrc%5Etfw">Follow on Twitter</a>
            </div>
            <div id="YouTubeChannelFoot">
               <a href="https://www.youtube.com/channel/UCKypjo59GE79UEjoLtzKEtQ">YouTube Channel</a>
            </div>
            <div id="aboutCodePen"><a href="https://codepen.io/matthewdeeprose/">CodePen</a></div><p><div id="aboutFoot">
               <a href="https://www.linkedin.com/in/mattdeeprose/">&#169;  Matthew Deeprose</a>
            </div>
         </p></footer>
      </div>

      <script>
         function menuAction() {
             let menuSwitch = document.getElementById("myTopnav");
             if (menuSwitch.className === "topnav") {
                 menuSwitch.className += " responsive";
                 
             } else {
                 menuSwitch.className = "topnav";
             }
             let menuAriaAttrib = document.getElementById("menu").getAttribute("aria-expanded");
             if (menuAriaAttrib === "true") {
                 menuAriaAttrib = "false"
             } else {
                 menuAriaAttrib = "true"
             }
             document.getElementById("menu").setAttribute("aria-expanded", menuAriaAttrib);
         }

















      </script>
      <script>
         let mybutton = document.getElementById("myBtn");
         let mybutton2 = document.getElementById("myBtn2");
         
         
         window.onscroll = function() {
             scrollFunction()
         };
         
         function scrollFunction() {
             if (document.body.scrollTop > 660 || document.documentElement.scrollTop > 660) {
                 mybutton.style.display = "block";
         		mybutton2.style.display = "block";
             } else {
                 mybutton.style.display = "none";
         		mybutton2.style.display = "none";
             }
         }
         
         
         
         function topFunction() {
             document.body.scrollTop = 0;
             document.documentElement.scrollTop = 0; 
         document.getElementById('skipToContent').focus();
         }
         
         function bottomFunction() {
         window.scrollTo(0,document.body.scrollHeight);
         document.getElementById('rssA').focus();
         }
      </script>
      <script>
         let themePref = localStorage.getItem("theme");
         console.log("Has a theme preference been saved?", themePref);        
         
         
         function setLight() {
             let buttonStatus = document.getElementById("lightDark");
             let theButton = document.getElementById("modeToggle");
             const d = matchMedia('(prefers-color-scheme: dark)');
             let dt;
             if (d.matches) {
                 dt = 'dark';
                 console.log("Prefers dark theme in OS");
             } else {
                 dt = 'light'
                 console.log("Prefers light theme in OS");
             }
             if (dt == 'dark' && themePref == 'Dark') {
                 theButton.setAttribute("aria-pressed", "true");
             } else if (dt == 'light' && themePref == 'Dark') {
                 theButton.setAttribute("aria-pressed", "true");
             } else if (dt == 'dark' && !themePref) {
                 theButton.setAttribute("aria-pressed", "true");
             } else {
                 theButton.setAttribute("aria-pressed", "false");
             }
         }
         setLight();
         
         function toggle(btnID) {
             let buttonStatus = document.getElementById("lightDark");
             let theButton = document.getElementById(btnID);
             if (theButton.getAttribute("aria-pressed") == "true") {
                 theButton.setAttribute("aria-pressed", "false");
                 document.getElementById('lightCSS').href = 'light.css';
                 document.getElementById('darkCSS').href = 'light.css';
                 console.log("Turned on light mode");
                 localStorage.setItem("theme", "Light");
                 let themePref = localStorage.getItem("theme");
                 console.log("Site theme preference to ", themePref);
                 document.getElementById('lightDark').innerHTML = 'Light theme enabled, the button is now';
                 let toggleButton = document.getElementById('modeToggle');
                 toggleButton.removeAttribute("aria-pressed");
                 toggleButton.setAttribute("aria-pressed", "false");
             } else {
                 theButton.setAttribute("aria-pressed", "true");
                 document.getElementById('lightCSS').href = 'dark.css';
                 document.getElementById('darkCSS').href = 'dark.css';
                 console.log("Turned on dark mode");
                 localStorage.setItem("theme", "Dark");
                 let themePref = localStorage.getItem("theme");
                 console.log("Site theme preference set to ", themePref);
                 document.getElementById('lightDark').innerHTML = 'Dark theme enabled, the button is now';
                 let toggleButton = document.getElementById('modeToggle');
                 toggleButton.removeAttribute("aria-pressed");
                 toggleButton.setAttribute("aria-pressed", "true");
             }
         }
         
         function applyThemePreference() {
             if (themePref == 'Dark') {
                 let theButton = document.getElementById('modeToggle');
                 document.getElementById('lightCSS').href = 'dark.css';
                 document.getElementById('darkCSS').href = 'dark.css';
                 theButton.setAttribute("aria-pressed", "true");
                 console.log("Applied", themePref, "theme because site theme preference is set to", themePref);
             } else if (themePref == 'Light') {
                 let theButton = document.getElementById('modeToggle');
                 document.getElementById('lightCSS').href = 'light.css';
                 document.getElementById('darkCSS').href = 'light.css';
                 theButton.setAttribute("aria-pressed", "false");
                 console.log("Applied", themePref, "theme because site theme preference is set to", themePref);
             }
         }
         applyThemePreference();                
      </script>
	  <script src="scripts/lite-yt-embed.js"></script>
	  <link rel="stylesheet" href="scripts/lite-yt-embed.css"/>
	  	    <script src="scripts/jquery-3.7.1.min.js"></script>
    <script src="scripts/details.js"></script>
    <script>
      window.console || (window.console = {
        'log': alert
      });
      $(function() {
        $('html').addClass($.fn.details.support ? 'details' : 'no-details');
        $('details').details();
        $('details').on({
          'open.details': function() {
            console.log('opened')
          },
          'close.details': function() {
            console.log('closed')
          }
        })
      });
    </script>
	    <script>
      // Expand details / summary when printing
      // From https://stackoverflow.com/questions/19646684/force-open-the-details-summary-tag-for-print-in-chrome
      window.matchMedia("print").addEventListener("change", evt => {
        if (evt.matches) {
          elms = document.body.querySelectorAll("details:not([open])");
          for (e of elms) {
            e.setAttribute("open", "");
            e.dataset.wasclosed = "";
          }
        } else {
          elms = document.body.querySelectorAll("details[data-wasclosed]");
          for (e of elms) {
            e.removeAttribute("open");
            delete e.dataset.wasclosed;
          }
        }
      })
    </script>
			  <script>
document.addEventListener("DOMContentLoaded", function() {
    // Step 1: Add IDs to all heading elements without IDs
    const headings = document.querySelectorAll("h1, h2, h3, h4, h5, h6");
    headings.forEach(heading => {
        if (!heading.id) {
            heading.id = heading.textContent.replace(/\s+/g, '');
        }
    });

    // Step 2: Create list items for each H2 in the ul with ID 'index'
    const contentsList = document.getElementById("index");
    if (contentsList) {
        const h2Elements = document.querySelectorAll("h2");
        h2Elements.forEach(h2 => {
            if (h2.textContent !== "Contents") {
                const listItem = document.createElement("li");
                const link = document.createElement("a");
                link.href = `#${h2.id}`;
                link.textContent = h2.textContent;
                listItem.appendChild(link);
                contentsList.appendChild(listItem);
            }
        });
    }
});
	  </script>


   </body>
</html>
