<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="Brand Accessible Colour Contrast Suggester">
    <meta name="keywords" content="accessibility, presentation, blog">
    <meta name="author" content="Matthew Deeprose">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Brand Accessible Colour Contrast Suggester</title>
    <link rel="stylesheet" id="lightCSS" href="light.css" media="(prefers-color-scheme: light)">
    <link rel="stylesheet" id="mainCSS" href="main.css" media="all">
    <link rel="stylesheet" id="darkCSS" href="dark.css" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" id="printCSS" href="print.css" media="print">
    <link rel="stylesheet" id="infographicCSS" href="infographic4.css" media="all">
    <script src="https://matthewdeeprose.github.io/scripts/jquery-3.6.0.min.js"></script>
    <meta property="og:title" content="Brand Accessible Colour Contrast Suggester - Matthew Deeprose">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://matthewdeeprose.github.io/suggester.png">
    <meta property="og:image:alt" content="">
    <meta property="og:locale" content="en_GB">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://matthewdeeprose.github.io/infographic-colour-generator.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="theme-color" content="#231F20" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#FFFFF4" media="(prefers-color-scheme: light)">
    <link rel="icon" href="favicon.ico">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for matthewdeeprose.github.io" href="https://matthewdeeprose.github.io/feed.rss">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Brand Accessible Colour Contrast Suggester - Matthew Deeprose" />
    <meta name="twitter:description" content="" />
    <meta name="twitter:creator" content="@VLEguru" />
    <meta name="twitter:site" content="@VLEguru" />
    <meta name="twitter:image" content="https://matthewdeeprose.github.io/suggester.png" />
    <meta name="twitter:image:alt" content="" />
    <meta name="twitter:card" content="summary_large_image" />
    <script type="module" src="suggester/app.js"></script>
    <script src="https://colorjs.io/dist/color.global.js"></script>
    <script>
      // Swap between colour blind emulations
      function showProta() {
        console.log("\n");
        console.log("Simulating protanopia");
        console.log("\n");
        // class transformation routine from https://www.codingexercises.com/replace-all-instances-of-css-class-in-vanilla-js
        let a = document.getElementsByClassName("Trichromacy");
        [...a].forEach(x => x.className += " protanopia");
        [...a].forEach(x => x.classList.remove("Trichromacy"));
        let b = document.getElementsByClassName("deuteranopia");
        [...b].forEach(x => x.className += " protanopia");
        [...b].forEach(x => x.classList.remove("deuteranopia"));
        let c = document.getElementsByClassName("tritanopia");
        [...c].forEach(x => x.className += " protanopia");
        [...c].forEach(x => x.classList.remove("tritanopia"));
        // Hide irrelevant buttons
        //$("#showProta").css({
        //    "display": "none"
        //});
        // make prota button disabled and set aria to disabled
        document.getElementById("showProta").disabled = true;
        document.getElementById("showProta").setAttribute("aria-disabled", "true");
        // Show Trichromacy button
        $("#showTrich").show(); //<--keep
        // Set trich to enabled both button and aria
        document.getElementById("showTrich").disabled = false;
        document.getElementById("showTrich").setAttribute("aria-disabled", "false");
        // Set showDeute to enabled both button and aria
        document.getElementById("showDeute").disabled = false;
        document.getElementById("showDeute").setAttribute("aria-disabled", "false");
        // Set showTrita to enabled both button and aria
        document.getElementById("showTrita").disabled = false;
        document.getElementById("showTrita").setAttribute("aria-disabled", "false");
        // Display helpful message
        $("#buttonHelp").show();
        $("#buttonHelp").text("Palette colours now simulate how they may be perceived by someone with protonopia. Protanopia means lacking the red cones for long-wavelength sensitive retinal cone cells. Those affected may be unable to tell the difference between red and green. Blue and yellow shades are more likely to stand out.");
      }

      function showDeute() {
        console.log("\n");
        console.log("Simulating deuteranopia");
        console.log("\n");
        // class transformation routine from https://www.codingexercises.com/replace-all-instances-of-css-class-in-vanilla-js
        let a = document.getElementsByClassName("Trichromacy");
        [...a].forEach(x => x.className += " deuteranopia");
        [...a].forEach(x => x.classList.remove("Trichromacy"));
        let b = document.getElementsByClassName("protanopia");
        [...b].forEach(x => x.className += " deuteranopia");
        [...b].forEach(x => x.classList.remove("protanopia"));
        let c = document.getElementsByClassName("tritanopia");
        [...c].forEach(x => x.className += " deuteranopia");
        [...c].forEach(x => x.classList.remove("tritanopia"));
        // make Deute button disabled and set aria to disabled
        document.getElementById("showDeute").disabled = true;
        document.getElementById("showDeute").setAttribute("aria-disabled", "true");
        // Show Trichromacy button
        $("#showTrich").show(); //<--keep
        // Set showTrich to enabled both button and aria
        document.getElementById("showTrich").disabled = false;
        document.getElementById("showTrich").setAttribute("aria-disabled", "false");
        // Set showProta to enabled both button and aria
        document.getElementById("showProta").disabled = false;
        document.getElementById("showProta").setAttribute("aria-disabled", "false");
        // Set showTrita to enabled both button and aria
        document.getElementById("showTrita").disabled = false;
        document.getElementById("showTrita").setAttribute("aria-disabled", "false");
        // Display helpful message
        $("#buttonHelp").show();
        $("#buttonHelp").text("Palette colours now simulate how they may be perceived by someone with deuteranopia. Deuteranopia means lacking the green cones for medium-wavelength sensitive retinal cone cells. Those affected may be unable to tell the difference between red and green. Blue and yellow shades are more likely to stand out.");
      }

      function showTrita() {
        console.log("\n");
        console.log("Simulating tritanopia");
        console.log("\n");
        // class transformation routine from https://www.codingexercises.com/replace-all-instances-of-css-class-in-vanilla-js
        let a = document.getElementsByClassName("protanopia");
        [...a].forEach(x => x.className += " tritanopia");
        [...a].forEach(x => x.classList.remove("protanopia"));
        let b = document.getElementsByClassName("deuteranopia");
        [...b].forEach(x => x.className += " tritanopia");
        [...b].forEach(x => x.classList.remove("deuteranopia"));
        let c = document.getElementsByClassName("Trichromacy");
        [...c].forEach(x => x.className += " tritanopia");
        [...c].forEach(x => x.classList.remove("Trichromacy"));
        // make showTrita button disabled and set aria to disabled
        document.getElementById("showTrita").disabled = true;
        document.getElementById("showTrita").setAttribute("aria-disabled", "true");
        // Show Trichromacy button
        $("#showTrich").show(); //<--keep
        // Set trich to enabled both button and aria
        document.getElementById("showTrich").disabled = false;
        document.getElementById("showTrich").setAttribute("aria-disabled", "false");
        // Set showDeute to enabled both button and aria
        document.getElementById("showDeute").disabled = false;
        document.getElementById("showDeute").setAttribute("aria-disabled", "false");
        // Set showTrita to enabled both button and aria
        document.getElementById("showProta").disabled = false;
        document.getElementById("showProta").setAttribute("aria-disabled", "false");
        // Display helpful message
        $("#buttonHelp").show();
        $("#buttonHelp").text("Palette colours now simulate how they may be perceived by someone with tritanopia. Tritanopia means lacking the blue cones for short-wavelength sensitive retinal cone cells. Those affected may be unable to tell the difference between blue and green, purple and red, and yellow and pink. It also makes colors look less bright.");
      }

      function showTrich() {
        console.log("\n");
        console.log("trichromatic vision");
        console.log("\n");
        // class transformation routine from https://www.codingexercises.com/replace-all-instances-of-css-class-in-vanilla-js
        let a = document.getElementsByClassName("deuteranopia");
        [...a].forEach(x => x.className += " Trichromacy");
        [...a].forEach(x => x.classList.remove("deuteranopia"));
        let b = document.getElementsByClassName("protanopia");
        [...b].forEach(x => x.className += " Trichromacy");
        [...b].forEach(x => x.classList.remove("protanopia"));
        let c = document.getElementsByClassName("tritanopia");
        [...c].forEach(x => x.className += " Trichromacy");
        [...c].forEach(x => x.classList.remove("tritanopia"));
        $("#showProta").show();
        $("#showDeute").show();
        $("#showTrita").show();
        // Set trich to enabled both button and aria
        document.getElementById("showTrich").disabled = true;
        document.getElementById("showTrich").setAttribute("aria-disabled", "true");
        document.getElementById("showProta").disabled = false;
        document.getElementById("showProta").setAttribute("aria-disabled", "false");
        // Set showDeute to enabled both button and aria
        document.getElementById("showDeute").disabled = false;
        document.getElementById("showDeute").setAttribute("aria-disabled", "false");
        // Set showTrita to enabled both button and aria
        document.getElementById("showTrita").disabled = false;
        document.getElementById("showTrita").setAttribute("aria-disabled", "false");
        // Display helpful message
        $("#buttonHelp").show();
        $("#buttonHelp").text("Palette colours now simulate how they may be perceived by someone with trichromatic vision. Trichromatic vision is what we consider to be the standard ability to see colours.");
      }
    </script>
    <style>
      .page-wrap>* {
        grid-column: 1/-1 !important;
        grid-row: auto !important;
      }
    </style>
    <style>
      .protanopia {
        -webkit-filter: url(#protanopia);
        -moz-filter: url(#protanopia);
        -ms-filter: url(#protanopia);
        -o-filter: url(#protanopia);
        filter: url(#protanopia);
      }

      .deuteranopia {
        -webkit-filter: url(#deuteranopia);
        -moz-filter: url(#deuteranopia);
        -ms-filter: url(#deuteranopia);
        -o-filter: url(#deuteranopia);
        filter: url(#deuteranopia);
      }

      .tritanopia {
        -webkit-filter: url(#tritanopia);
        -moz-filter: url(#tritanopia);
        -ms-filter: url(#tritanopia);
        -o-filter: url(#tritanopia);
        filter: url(#tritanopia);
      }
    </style>

    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <!-- Lock Icon -->
      <symbol id="icon-lock" viewBox="0 0 24 24">
        <path fill="none" stroke="currentColor" stroke-width="2" d="M7,11 L7,7 C7,4.2 9.2,2 12,2 C14.8,2 17,4.2 17,7 L17,11 
                 M5,11 L19,11 L19,21 L5,21 Z" />
      </symbol>
      <!-- Unlock Icon -->
      <symbol id="icon-unlock" viewBox="0 0 24 24">
        <path fill="none" stroke="currentColor" stroke-width="2" d="M7,11 L7,7 C7,4.2 9.2,2 12,2 C14.8,2 17,4.2 17,7 
                 M5,11 L19,11 L19,21 L5,21 Z" />
      </symbol>
    </svg>
  </head>
  <body>
    <div class="page-wrap" id="start">
      <a class="skip-link" id="skipToContent" href='#main'>Skip to content</a>
      <header class="page-header">
        <div id="banner">
          <div id="logo">
            <button id="modeToggle" aria-label="Change between light and dark theme" aria-pressed="false" onclick="toggle(this.id);">
              <svg id="logoSVG" height="45" viewBox="0 0 21 21" width="45" xmlns="http://www.w3.org/2000/svg" aria-labelledby="svgTitle svgDesc" role="img">
                <title id="svgTitle">Change theme</title>
                <desc id="svgDesc">Select to switch to light theme</desc>
                <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(2 1)">
                  <path d="m6.5 17.5h4" />
                  <path d="m8.5 4c2.4852814 0 4.5 2.01471863 4.5 4.5 0 1.7663751-1.017722 3.2950485-2.4987786 4.031633l-.0012214.968367c0 1.1045695-.8954305 2-2 2s-2-.8954305-2-2l-.00021218-.9678653c-1.48160351-.7363918-2.49978782-2.2653584-2.49978782-4.0321347 0-2.48528137 2.01471863-4.5 4.5-4.5z" />
                  <path d="m8.5 1.5v-1" />
                  <path d="m13.5 3.5 1-1" />
                  <path d="m2.5 3.5 1-1" transform="matrix(-1 0 0 1 6 0)" />
                  <path d="m13.5 13.5 1-1" transform="matrix(1 0 0 -1 0 26)" />
                  <path d="m2.5 13.5 1-1" transform="matrix(-1 0 0 -1 6 26)" />
                  <path d="m1.5 7.5h-1" />
                  <path d="m16.5 7.5h-1" />
                </g>
              </svg>
              <svg id="logoSVG-Off" height="45" viewBox="0 0 21 21" width="45" xmlns="http://www.w3.org/2000/svg" aria-labelledby="svgTitleX svgDescX">
                <title id="svgTitleX">Change theme</title>
                <desc id="svgDescX">Select to switch to dark theme</desc>
                <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(6 5)">
                  <path d="m2.5 13.5h4" />
                  <path d="m4.5 0c2.48528137 0 4.5 2.01471863 4.5 4.5 0 1.76637512-1.01772197 3.29504854-2.49877863 4.03163297l-.00122137.96836703c0 1.1045695-.8954305 2-2 2s-2-.8954305-2-2l-.00021218-.96786527c-1.48160351-.73639182-2.49978782-2.26535843-2.49978782-4.03213473 0-2.48528137 2.01471863-4.5 4.5-4.5z" />
                </g>
              </svg>
            </button>
          </div>
          <span role="alert" class="hidden" aria-live="polite" id="lightDark"></span>
          <div id="titleLink">Matthew Deeprose</div>
        </div>
      </header>
      <div id="main-navigation" class="page-nav">
        <nav aria-label="Main menu" class="topnav" id="myTopnav">
          <button id="menu" aria-controls="myTopnav" aria-labelledby="myTopnav" aria-expanded="false" class="icon" aria-haspopup="menu" onclick="menuAction()">
            <span id="hamburger">
              <svg id="hamSVG" viewBox="0 0 100 80" width="20" height="20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" role="img">
                <title id="hamSVGTitle">Menu</title>
                <desc id="hamSVGDesc">Select to expand or collapse the menu</desc>
                <rect width="100" height="20"></rect>
                <rect y="30" width="100" height="20"></rect>
                <rect y="60" width="100" height="20"></rect>
              </svg>
            </span>
            <span id="arrow">
              <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" focusable="false">
                <title id="arrowSVGTitle">Menu</title>
                <desc id="arrowSVGDesc">Select to expand or collapse the menu</desc>
                <g stroke-width="4" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" fill-rule="evenodd" fill="none">
                  <path d="m7.499,6.497l-3.999,4.002l4,4.001" />
                  <path d="m16.5,10.5l-13,0" />
                </g>
              </svg>
            </span>
          </button>
          <a id="homeMenu" href="index.html">Home</a>
          <a href="presentations.html">Presentations</a>
          <a href="posts.html">Blog Posts</a>
          <a href="projects.html" aria-current="page" class="active">Projects</a>
          <a href="about.html">About</a>
        </nav>
      </div>
      <main class="page-main" id="main">
        <article class="standard">
          <h1 id="top">Brand Accessible Colour Contrast Suggester</h1>
          <details id="introductionDetails">
            <summary>
              <h2>Introduction</h2>
            </summary>
            <p id="explainSuggester">When we use a corporate brand, the requirement to ensure we make accessible choices may leave us reliant on a small set of colours. With each use of the Randomise button, a background colour, text colour, and three graphic colours will appear at random from the <a href="https://sotonac.sharepoint.com/teams/Brand/SitePages/Visual-Identity/ColourPalette.aspx">UoS brand</a>. This may help you to choose a new accessible and on-brand colour combination for your next document, presentation, or infographic. </p>
          </details>
          <details id="customisationDetails">
            <summary>
              <h2 id="upload">Upload your own colours</h2>
            </summary>
            <div id="uploadNotification" class="upload-notification" role="status" aria-live="polite">
              <div class="upload-notification-content">
                  <svg class="upload-notification-icon" aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <p class="upload-notification-message"></p>
              </div>
          </div>
            <div class="upload-container">
              <div class="file-upload-section">
                <div class="upload-option">
                  
                  <h3>Upload JSON</h3>
                  <p>JSON file with color hex codes and names</p>
                  <input type="file" id="jsonFileInput" accept=".json" aria-label="Upload JSON file with colors">
                  <div class="sample-format">
                    <p>Example format:</p>
                    <pre>[
  {"colourHex": "#FFFFFF", "name": "White"},
  {"colourHex": "#000000", "name": "Black"}
]</pre>
                  </div>
                </div>
                <div class="upload-option">


                  <h3>Upload CSV</h3>
                  <p>CSV file with colors (supports multiple formats)</p>
                  <input type="file" id="csvFileInput" accept=".csv" aria-label="Upload CSV file with colors">
                  <div class="sample-format">
                    <p>Supported formats:</p>
                    <pre>HEX,NAME
#FFFFFF,White
#000000,Black</pre>
                    <pre>NAME,HEX
White,#FFFFFF
Black,#000000</pre>
                    <pre>HEX
#FFFFFF
#000000</pre>
                  </div>
                </div>
              </div>
              <div class="upload-option">
                <h3>Enter Colours as Text. Select "Add Colours" when ready.</h3>
                <div id="formatHelp" class="sample-format">

                  <div class="format-info">
                    <p>Enter one colour per line using any of these formats:</p>
                    <ul>
                      <li>Name and hex code with comma: <code>White, #FFFFFF</code></li>
                      <li>Name and hex code with colon: <code>White: #FFFFFF</code></li>
                      <li>Hex code only: <code>#FFFFFF</code></li>
                    </ul>
                    <button type="button" class="sample-button" aria-label="Insert example colours">
                      Try adding example colours
                    </button>
                  </div>
                                 </div>
                <div class="text-input-container">
                  <label for="colorTextInput">Enter colours, one per line</label>
                  <textarea 
                    id="colorTextInput"
                    rows="6"
                    class="color-input"
                    aria-describedby="formatHelp colorInputError"
                    placeholder="Example:&#10;White, #FFFFFF&#10;Black, #000000"
                  ></textarea>
                  <div class="button-group">
                    <button type="button" class="submit-button" aria-label="Add these colours">
                      Add colours
                    </button>
                    <button type="button" class="clear-button" aria-label="Clear input">
                      Clear input
                    </button>
                   
                  </div>
                  <div id="colorInputError" class="error-message" role="alert" aria-live="polite"></div>
                  <div id="uploadError" class="error-container" role="alert">
                    <!-- Error messages will be displayed here -->
                  </div>

              
                  
              

                </div>
              </div>
              
            </div>
          </details>
          <details>
            <summary>
              <h2>View insights and statistics</h2>
            </summary>
            <div id="uploadStats" class="stats-container" aria-live="polite">
              <!-- Statistics will be displayed here -->
            </div>
            <div class="versatility-explanation" aria-labelledby="versatility-heading">
              <h3 id="versatility-heading">Understanding Versatility Scores</h3>
              
              <p>The versatility score measures how well a background colour works with other colours in the palette. A higher score means the colour is more versatile for different design needs. The score is calculated by combining three factors:</p>
              
              <div class="score-breakdown">
                <h4>Score Components</h4>
                <dl>
                  <dt>Enhanced Text Contrast (40% of score)</dt>
                  <dd>The percentage of colours that achieve AAA-level contrast (7:1 or higher) when used as text on this background. These combinations provide excellent readability for all users.</dd>
                  
                  <dt>Standard Text Contrast (35% of score)</dt>
                  <dd>The percentage of colours that achieve AA-level contrast (4.5:1 to 6.9:1) when used as text. These combinations meet basic accessibility requirements.</dd>
                  
                  <dt>Graphic Element Contrast (25% of score)</dt>
                  <dd>The percentage of colours that can be used for graphics or UI elements (achieving at least 3:1 contrast) on this background.</dd>
                </dl>
              </div>
            
              <div class="score-interpretation">
                <h4>Understanding the Results</h4>
                <dl>
                  <dt>Highly Versatile ⭐</dt>
                  <dd>Colours with a score of 34.5% or higher are marked as highly versatile. These colours work well with many other colours in the palette while maintaining accessibility.</dd>
                </dl>
              </div>
            
              <div class="calculation-example">
                <h4>Example Calculation</h4>
                <p>For a background colour in a palette of 20 colours:</p>
                <ul>
                  <li>If it has AAA contrast with 8 colours: 8/20 × 0.40 = 16%</li>
                  <li>If it has AA contrast with 6 colours: 6/20 × 0.35 = 10.5%</li>
                  <li>If it works with 12 colours for graphics: 12/20 × 0.25 = 15%</li>
                  <li>Total versatility score: 16% + 10.5% + 15% = 41.5%</li>
                </ul>
                <p>This background colour would be marked as highly versatile since 41.5% > 34.5%.</p>
              </div>
            </div>
            </details>
            <details>
          <summary>
            <h2>Manage colours in use</h2>
          </summary>
          <div id="colorManagement" class="color-management"></div>
        </details>
          <div id="myMessage">
            <div id="myMessageIcon"></div>
            <span id="pageMessage" aria-live="assertive" role="alert"></span>
            <button onclick="clearMessage();" class="clearMessageButton">Clear message</button>
          </div>
          <div id="introText">
          <p>Default palette is the University of Southampton brand, <a href="#upload" onclick="openDetailsSection('customisationDetails')">upload your own brand</a>.</p>
            <p>Use the Randomise button to get started!</p>


            
        </div>
          <div class="resourseList2">
            <div class="grid-child">
              <button id="randomizeBtn" class="actionButton regButton" type="button">Randomise</button>
			  <span> <span class="sr-only" id="counterDisplay"></span></span>
              <section class="Trichromacy" id="infoGraphicBox" class="" aria-hidden="true">
                <h2 id="infoTexT" class="">Text and information</h2>
                <p class="iconrow">
                  <span id="icon1" class="infoIcon">&#x2745;</span>
                  <span id="icon2" class="infoIcon">&#9825;</span>
                  <span id="icon3" class="infoIcon">&#10026;</span>
                </p>
              </section>
              <div id="tableButtons">
                <button id="showTrich" class="regButton" type="button" onclick="showTrich()" aria-disabled="true" disabled>Reset to trichromacy</button>
                <button id="showProta" class="regButton" type="button" onclick="showProta()" aria-disabled="false">Simulate protanopia</button>
                <button id="showDeute" class="regButton" type="button" onclick="showDeute()" aria-disabled="false">Simulate deuteranopia</button>
                <button id="showTrita" class="regButton" type="button" onclick="showTrita()" aria-disabled="false">Simulate tritanopia </button>
              </div>
              <span id="buttonHelp" aria-live="polite"></span>
            </div>
            <div class="grid-child" id="info">
              <section class="details">
                <h2 id="colDetailsH2">Colour details</h2>
                <p class="details">
                  <span id="bgC" class="details">Background colour: </span>
                  <span class="result2">

                    <span id="bgColor" class="colorbox color-swatch Trichromacy">&nbsp;&nbsp;&nbsp;</span>
                    <span class="details result" id="backgroundColor"></span>
                    <span class="details result" id="backgroundName"></span>
					<br><span class="details lockSpan">Lock background colour? </span>
					                    <button data-color-type="background" data-color-target="bgColor" aria-label="Hold background color" aria-pressed="false" class="hold-button">
                      <span class="sr-only">Hold background colour</span>
                      <!--- This should sr-only, not visually hidden --->
                      <svg width="20" height="20" aria-hidden="true" focusable="false">
                        <use href="#icon-unlock" />
                      </svg>
                    </button>
                  </span>
                </p>
                <p class="details">Text colour: <span class="result2">

                    <span id="tColorColor" class="colorbox color-swatch Trichromacy">&nbsp;&nbsp;&nbsp;</span>
                    <span class="details result" id="tcolor"></span>
                    <span class="details result" id="tColorName"></span>
					</span>
                  <br /> Text contrast: <span class="details result" id="tcontrast"></span>
                  <br />WCAG Rating: <span class="details result" id="tcontrastWCAG" aria-hidden="true"></span>
                  <br />
                  <span class="arrayDetails">Text contrast array used: <span class="details" id="tcontrastArray"></span>
                  </span>
                </p>
                <p class="details">Graphic 1 <span>&#x2745;</span> colour: <span class="result2">
                    <span id="g1colourSpan2" class="colorbox color-swatch Trichromacy">&nbsp;&nbsp;&nbsp;</span>
                    <span class="details result" id="g1colourSpan1"></span>
                    <span class="details result" id="gfx1ColorName"></span>
					
                  </span>
                  <br />Graphic 1 contrast: <span id="g1contrast" class="details result"></span>
                  <br />WCAG Rating: <span class="details result" id="g1contrastWCAG"></span>
                </p>
                <p class="details">Graphic 2 <span>&#9825;</span> colour: <span class="result2">
                   
                    <span id="g2colourSpan2" class="colorbox color-swatch Trichromacy">&nbsp;&nbsp;&nbsp;</span>
                    

					<span id="g2colourSpan1" class="details result"></span>
                    <span class="details result" id="gfx2ColorName"></span>

                  </span>
                  <br />Graphic 2 contrast: <span class="details result" id="g2contrast"></span>
                  <br />WCAG Rating: <span class="details result" id="g2contrastWCAG"></span>
                </p>
                <p class="details">Graphic 3 <span>&#10026;</span> colour: <span class="result2">

                    <span id="g3colourSpan2" class="colorbox color-swatch Trichromacy">&nbsp;&nbsp;&nbsp;</span>
                    <span id="g3colourSpan1" class="details result"></span>
                    <span class="details result" id="gfx3ColorName"></span>
			
                  </span>
                  <br />Graphic 3 contrast: <span id="g3contrast" class="details result"></span>
                  <br />WCAG Rating: <span id="g3contrastWCAG" class="details result" aria-hidden="true"></span>
                </p>
              </section>
            </div>
          </div>
          <section id="srDetails" class="sr-only">
            <h2>Results</h2>
            <span id="srResults" aria-live="polite"></span>
          </section>
          <section class="infoDetails">
            <h2>What does "WCAG Rating" mean?</h2>
            <p>WCAG means the Web Content Accessibility Guidelines. The rating refers to a number of WCAG success criteria outlined below and for what purpose the level of contrast is suitable.</p>
            <dl>
              <dt class="infoExplain">G: Contrast ratio is at least 3:1</dt>
              <dd class="infoExplain">
                <ul>
                  <li>
                    <a href="https://www.howtogeek.com/435266/what-does-tldr-mean-and-how-do-you-use-it/">Tl;dr:</a> Use for graphics / icons, but not text.
                  </li>
                  <li>Suitable for User Interface Components and Graphical Objects where no text is used (<a href="https://www.w3.org/WAI/WCAG21/Understanding/non-text-contrast.html">WCAG 2.1 Success Criterion 1.4.11 Non-text Contrast</a>).</li>
                  <li>Suitable for large-scale text (at least 18 point if not bold and at least 14 point if bold) and images of large-scale text (<a href="https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html">WCAG 2.1 Success Criterion 1.4.3 Contrast (Minimum)</a>).</li>
                  </ul>
              </dd>
              <dt class="infoExplain">AA: Contrast ratio is at least 4.5:1</dt>
              <dd class="infoExplain">
                <ul>
                  <li>
                    <a href="https://www.howtogeek.com/435266/what-does-tldr-mean-and-how-do-you-use-it/">Tl;dr:</a> Use for text, graphics or icons.
                  </li>
                  <li>Suitable for the visual representation of text and images of text to minimum level (<a href="https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html">WCAG 2.1 Success Criterion 1.4.3 Contrast (Minimum)</a>).</li>
                  <li>Suitable for large-scale text (at least 18 point if not bold and at least 14 point if bold) and images of large-scale text (<a href="https://www.w3.org/WAI/WCAG21/Understanding/contrast-enhanced">WCAG 2.1 Success Criterion 1.4.6 Contrast (Enhanced)</a>).</li>
                  <li>Suitable for User Interface Components and Graphical Objects where no text is used (<a href="https://www.w3.org/WAI/WCAG21/Understanding/non-text-contrast.html">WCAG 2.1 Success Criterion 1.4.11 Non-text Contrast)</a>.</li>
                  </ul>
              </dd>
              <dt class="infoExplain">AAA: Contrast ratio is at least 7:1</dt>
              <dd class="infoExplain">
                <ul>
                  <li>
                    <a href="https://www.howtogeek.com/435266/what-does-tldr-mean-and-how-do-you-use-it/">Tl;dr:</a> Use for text, graphics or icons. This meets the enhanced AAA level.
                  </li>
                  <li>Suitable for the visual representation of text and images of text at enhanced level (<a href="https://www.w3.org/WAI/WCAG21/Understanding/contrast-enhanced">WCAG 2.1 Success Criterion 1.4.6 Contrast (Enhanced)</a>). </li>
                  <li>Suitable for User Interface Components and Graphical Objects where no text is used (<a href="https://www.w3.org/WAI/WCAG21/Understanding/non-text-contrast.html">WCAG 2.1 Success Criterion 1.4.11 Non-text Contrast</a>).</li>
                   </ul>
              </dd>
            </dl>
          </section>
          <script src="https://matthewdeeprose.github.io/scripts/chroma.min.js"></script>
        </article>
        <div id="panel">
          <button class="panelButton" onclick="topFunction()" id="myBtn">
            <svg id="svgUP" height="50" viewBox="0 0 21 21" width="50" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svgTitle2 svgDesc2">
              <title id="svgTitle2">Top.</title>
              <desc id="svgDesc2">Move to the top of the page.</desc>
              <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(2 2)">
                <circle cx="8.5" cy="8.5" r="8" />
                <path d="m11.5 7.5-3-3-3 3" />
                <path d="m8.5 4.5v8" />
              </g>
            </svg>
            <br />
            <span id="myBtnTop" class="panelLabel">Top</span>
          </button>
          <button class="panelButton" onclick="bottomFunction()" id="myBtn2">
            <svg id="svgDOWN" height="50" viewBox="0 0 21 21" width="50" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svgTitle3 svgDesc3">
              <title id="svgTitle3">Bottom.</title>
              <desc id="svgDesc3">Move to the bottom of the page.</desc>
              <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(3 2)">
                <circle cx="8.5" cy="8.5" r="8" />
                <path d="m5.5 9.5 3 3 3-3" />
                <path d="m8.5 12.5v-8" />
              </g>
            </svg>
            <br />
            <span id="myBtnBottom" class="panelLabel">Bottom</span>
          </button>
        </div>
        <svg style='height: 0; width: 0; padding: 0; margin: 0; line-height: 0;'>
          <!-- from https://daltonlens.org/cvd-simulation-svg-filters/ and https://github.com/DaltonLens/libDaltonLens/tree/master/svg -->
          <!-- Single matrix approximation of Viénot, Brettel & Mollon 1999 -->
          <filter id="protanopia" color-interpolation-filters="linearRGB">
            <feColorMatrix type="matrix" in="SourceGraphic" values="
            0.10889,0.89111,-0.00000,0,0
            0.10889,0.89111,0.00000,0,0
            0.00447,-0.00447,1.00000,0,0
            0,0,0,1,0" />
          </filter>
          <!-- Single matrix approximation of Viénot, Brettel & Mollon 1999 -->
          <filter id="deuteranopia" color-interpolation-filters="linearRGB">
            <feColorMatrix type="matrix" in="SourceGraphic" values="
            0.29031,0.70969,-0.00000,0,0
            0.29031,0.70969,-0.00000,0,0
            -0.02197,0.02197,1.00000,0,0
            0,0,0,1,0" />
          </filter>
          <!-- 
        Brettel, Viénot & Mollon 1997 algorithms with two projection planes.

        This is the only approach I know that is supposed to be reasonably
        accurate for tritanopia, the single matrix approaches are NOT accurate.
    -->
          <filter id="tritanopia" color-interpolation-filters="linearRGB">
            <!-- 
            Projection 1, with a special alpha that encodes the separation plane.
            If dot(rgb, n) > 0, then use projection 1, otherwise use projection 2.
            This is encoded in alpha by:
                - Applying a 1.0 factor on the source alpha so that 0 input alpha remains 0
                - Subtracting 0.2 so that negative values become < 0.8 and position values >= 0.8
                - It is important to normalize the factors to keep a good numerical accuracy
                  and to keep a large alpha threshold since the RGB values are then stored
                  premultiplied by alpha.
                - This assumes that negative values get clipped to 0, and positive
                  values clipped to 1, without overflowing, etc. Which seems to be the case
                  on all browsers.
          -->
            <feColorMatrix type="matrix" in="SourceGraphic" result="ProjectionOnPlane1" values="
            1.01354, 0.14268, -0.15622, 0, 0
            -0.01181, 0.87561, 0.13619, 0, 0
            0.07707, 0.81208, 0.11085, 0, 0
            7.92482, -5.66475, -2.26007, 1, -0.2" />
            <!-- 
            Binarize alpha. 5 values means the last chunk will start at 0.8.
            All the values below 0.8 will become 0 (correspond to the dot
            product with the separation plane being negative) and above will become 1
        -->
            <feComponentTransfer in="ProjectionOnPlane1" result="ProjectionOnPlane1">
              <feFuncA type="discrete" tableValues="0 0 0 0 1" />
            </feComponentTransfer>
            <feColorMatrix type="matrix" in="SourceGraphic" result="ProjectionOnPlane2" values="
            0.93337, 0.19999, -0.13336, 0, 0
            0.05809, 0.82565, 0.11626, 0, 0
            -0.37923, 1.13825, 0.24098, 0, 0
            0,0,0,1,0" />
            <!-- Uncomment the debug black matrix to see which pixels go to which plane -->
            <!-- <feColorMatrix type="matrix" in="SourceGraphic" result="ProjectionOnPlane2" values="0,0,0,0,0 0,0,0,0,0 0,0,0,0,0 0,0,0,1,0"/> -->
            <!-- Blend the two projections, picking one or the other depending on alpha. -->
            <feBlend in="ProjectionOnPlane1" in2="ProjectionOnPlane2" mode="normal" />
          </filter>
        </svg>
      </main>
      <aside class="page-sidebar related">
        <section class="related">
          <h2>Related content</h2>
          <ul class="relUL">
            <li>
              <a href="https://codepen.io/matthewdeeprose/pen/JjLMMob">View an early prototype of this tool in CodePen.</a>
            </li>
            <li>
              <a href="https://matthewdeeprose.github.io/matrix/matrix.html">Accessibility Matrix for University of Southampton Brand Colour Palette</a>
            </li>
          </ul>
        </section>
      </aside>
      <footer class="page-footer">
        <div id="RSS">
          <a id="rssA" href="feed.rss">RSS</a>
        </div>
        <div id="SiteMap">
          <a href="siteMap.html">Site Map</a>
        </div>
        <div id="AccessibilityFoot">
          <a href="Accessibility_Statement.html">Accessibility Statement</a>
        </div>
        <div id="twitterFoot">
          <a href="https://twitter.com/vleguru?ref_src=twsrc%5Etfw">Follow on Twitter</a>
        </div>
        <div id="YouTubeChannelFoot">
          <a href="https://www.youtube.com/channel/UCKypjo59GE79UEjoLtzKEtQ">YouTube Channel</a>
        </div>
        <div id="aboutCodePen">
          <a href="https://codepen.io/matthewdeeprose/">CodePen</a>
        </div>
        <p>
        <div id="aboutFoot">
          <a href="https://www.linkedin.com/in/mattdeeprose/">&#169; Matthew Deeprose</a>
        </div>
        </p>
      </footer>
    </div>
    <script>
      function menuAction() {
        let menuSwitch = document.getElementById("myTopnav");
        if (menuSwitch.className === "topnav") {
          menuSwitch.className += " responsive";
        } else {
          menuSwitch.className = "topnav";
        }
        let menuAriaAttrib = document.getElementById("menu").getAttribute("aria-expanded");
        if (menuAriaAttrib === "true") {
          menuAriaAttrib = "false"
        } else {
          menuAriaAttrib = "true"
        }
        document.getElementById("menu").setAttribute("aria-expanded", menuAriaAttrib);
      }
    </script>
    <script>
      let mybutton = document.getElementById("myBtn");
      let mybutton2 = document.getElementById("myBtn2");
      window.onscroll = function() {
        scrollFunction()
      };

      function scrollFunction() {
        if (document.body.scrollTop > 660 || document.documentElement.scrollTop > 660) {
          mybutton.style.display = "block";
          mybutton2.style.display = "block";
        } else {
          mybutton.style.display = "none";
          mybutton2.style.display = "none";
        }
      }

      function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
        document.getElementById('skipToContent').focus();
      }

      function bottomFunction() {
        window.scrollTo(0, document.body.scrollHeight);
        document.getElementById('rssA').focus();
      }
    </script>
    <script>
      let themePref = localStorage.getItem("theme");
      console.log("Has a theme preference been saved?", themePref);

      function setLight() {
        let buttonStatus = document.getElementById("lightDark");
        let theButton = document.getElementById("modeToggle");
        const d = matchMedia('(prefers-color-scheme: dark)');
        let dt;
        if (d.matches) {
          dt = 'dark';
          console.log("Prefers dark theme in OS");
        } else {
          dt = 'light'
          console.log("Prefers light theme in OS");
        }
        if (dt == 'dark' && themePref == 'Dark') {
          theButton.setAttribute("aria-pressed", "true");
        } else if (dt == 'light' && themePref == 'Dark') {
          theButton.setAttribute("aria-pressed", "true");
        } else if (dt == 'dark' && !themePref) {
          theButton.setAttribute("aria-pressed", "true");
        } else {
          theButton.setAttribute("aria-pressed", "false");
        }
      }
      setLight();

      function toggle(btnID) {
        let buttonStatus = document.getElementById("lightDark");
        let theButton = document.getElementById(btnID);
        if (theButton.getAttribute("aria-pressed") == "true") {
          theButton.setAttribute("aria-pressed", "false");
          document.getElementById('lightCSS').href = 'light.css';
          document.getElementById('darkCSS').href = 'light.css';
          console.log("Turned on light mode");
          localStorage.setItem("theme", "Light");
          let themePref = localStorage.getItem("theme");
          console.log("Site theme preference to ", themePref);
          document.getElementById('lightDark').innerHTML = 'Light theme enabled, the button is now';
          let toggleButton = document.getElementById('modeToggle');
          toggleButton.removeAttribute("aria-pressed");
          toggleButton.setAttribute("aria-pressed", "false");
        } else {
          theButton.setAttribute("aria-pressed", "true");
          document.getElementById('lightCSS').href = 'dark.css';
          document.getElementById('darkCSS').href = 'dark.css';
          console.log("Turned on dark mode");
          localStorage.setItem("theme", "Dark");
          let themePref = localStorage.getItem("theme");
          console.log("Site theme preference set to ", themePref);
          document.getElementById('lightDark').innerHTML = 'Dark theme enabled, the button is now';
          let toggleButton = document.getElementById('modeToggle');
          toggleButton.removeAttribute("aria-pressed");
          toggleButton.setAttribute("aria-pressed", "true");
        }
      }

      function applyThemePreference() {
        if (themePref == 'Dark') {
          let theButton = document.getElementById('modeToggle');
          document.getElementById('lightCSS').href = 'dark.css';
          document.getElementById('darkCSS').href = 'dark.css';
          theButton.setAttribute("aria-pressed", "true");
          console.log("Applied", themePref, "theme because site theme preference is set to", themePref);
        } else if (themePref == 'Light') {
          let theButton = document.getElementById('modeToggle');
          document.getElementById('lightCSS').href = 'light.css';
          document.getElementById('darkCSS').href = 'light.css';
          theButton.setAttribute("aria-pressed", "false");
          console.log("Applied", themePref, "theme because site theme preference is set to", themePref);
        }
      }
      applyThemePreference();
    </script>
    <script>
      /**
       * Clears the notification message from the page
       */
      function clearMessage() {
        document.getElementById('pageMessage').textContent = '';
        document.getElementById('myMessage').style.display = 'none';
      }
      /**
       * Displays a notification message to the user
       * @param {string} message - The message to display
       * @param {string} type - The type of notification ('success' or 'error')
       */
      function displayNotification(message, type) {
        document.getElementById('myMessage').style.display = 'block';
        const notification = document.getElementById('pageMessage');
        notification.textContent = message;
      }
    </script>
        <script>
          // Function to open details element
          function openDetailsSection(detailsId) {
              // Wait for the browser to complete the scroll
              setTimeout(() => {
                  const detailsElement = document.getElementById(detailsId);
                  if (detailsElement) {
                      detailsElement.open = true;
                  }
              }, 100);
          }
  
          // Function to handle hash navigation
          function handleHashNavigation() {
              if (window.location.hash) {
                  const targetId = window.location.hash.split('#')[1];
                  const targetElement = document.getElementById(targetId);
                  if (targetElement) {
                      // Find the closest parent details element
                      const parentDetails = targetElement.closest('details');
                      if (parentDetails) {
                          parentDetails.open = true;
                      }
                  }
              }
          }
  
          // Wait for DOM to be fully loaded
          document.addEventListener('DOMContentLoaded', handleHashNavigation);
  
          // Also handle load event in case resources affect layout
          window.addEventListener('load', handleHashNavigation);
  
          // Handle dynamic hash changes
          window.addEventListener('hashchange', handleHashNavigation);
      </script>
  </body>
</html>